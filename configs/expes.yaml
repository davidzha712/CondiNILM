data_path:  data/
result_path:  result/
dataset:  UKDALE
name_model:  NILMFormer
sampling_rate:  1min
window_size: 256
list_exo_variables:
  - minute
  - hour
  - dow
  - month

power_scaling_type:  MaxScaling
appliance_scaling_type:  MaxScaling

batch_size:  64
epochs:  25
p_es:  null
p_rlr:  3
n_warmup_epochs:  0

device:  auto          # auto / cuda / mps / cpu
accumulate_grad_batches: 1

num_workers: 10

# EAEC Related Parameters
p_es_eaec:  null
p_rlr_eaec:  5
n_warmup_epochs_eaec:  3
warmup_type_eaec:  linear
neg_penalty_weight_eaec: 0.02
rlr_factor_eaec: 0.5
rlr_min_lr_eaec: 1e-6
gradient_clip_val_eaec: 1.0
gate_cls_weight_eaec: 1.0
gate_window_weight_eaec: 0.5
gate_focal_gamma_eaec: 2.0

# seq2subseq Center Supervision Ratio
loss_center_ratio: 0.8

# Zero-run penalty for target=0 segments
state_zero_penalty_weight: 0.1
state_zero_kernel: 48
state_zero_ratio: 0.9

postprocess_min_on_steps: 3

off_high_agg_penalty_weight: 0.3

# ============== 损失函数参数（自动根据设备类型调整） ==============
# 这些是默认值，会被 _configure_nilm_loss_hyperparams 根据设备类型自动覆盖
#
# 支持的设备类型：
#   - sparse_high_power:    稀疏高功率设备（如Kettle, Microwave）
#   - frequent_switching:   频繁开关设备（如Fridge）
#   - long_cycle:           长周期运行设备（如WashingMachine, Dishwasher）
#   - always_on:            常开设备
#   - sparse_medium_power:  稀疏中等功率设备

# ===== OFF假阳性惩罚（温和设置，防止模型学会全输出0） =====
# lambda_off_hard: OFF状态硬约束权重（降低！）
loss_lambda_off_hard: 0.1

# off_margin: OFF状态的功率容忍边界（归一化后），允许小噪声
loss_off_margin: 0.02

# ===== ON漏检惩罚（关键！防止全0输出） =====
# lambda_on_recall: ON漏检惩罚权重，惩罚ON时输出太低
loss_lambda_on_recall: 0.3

# on_recall_margin: ON时输出至少达到目标的多少比例
loss_on_recall_margin: 0.5

# ===== 门控分类（温和设置） =====
# lambda_gate_cls: 门控分类损失权重（降低！）
loss_lambda_gate_cls: 0.1

# gate_focal_gamma: Focal Loss gamma参数
loss_gate_focal_gamma: 2.0
